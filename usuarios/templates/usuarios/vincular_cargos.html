{% extends 'base.html' %} 
{% load crispy_forms_tags %}

{% block title %}Vincular Usuários a Cargos{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-10 offset-md-1">
        <h1 class="mb-4">{{ titulo }}</h1>
        <p class="lead">Use esta página para atribuir perfis de Coordenador ou Colaborador a usuários existentes.</p>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <ul class="nav nav-tabs" id="cargoTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="coordenador-tab" data-bs-toggle="tab" data-bs-target="#coordenador" type="button" role="tab" aria-controls="coordenador" aria-selected="true">
                    <i class="fas fa-user-tie"></i> Vincular Coordenador
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="colaborador-tab" data-bs-toggle="tab" data-bs-target="#colaborador" type="button" role="tab" aria-controls="colaborador" aria-selected="false">
                    <i class="fas fa-users-cog"></i> Vincular Colaborador
                </button>
            </li>
        </ul>

        <div class="tab-content border border-top-0 p-4 bg-light" id="cargoTabsContent">
            
            <div class="tab-pane fade show active" id="coordenador" role="tabpanel" aria-labelledby="coordenador-tab">
                <h3 class="mb-3">Atribuir Coordenador</h3>
                <form method="post">
                    {% csrf_token %}
                    
                    {{ coordenador_form|crispy }}
                    
                    <button type="submit" name="salvar_coordenador" class="btn btn-success mt-3">
                        <i class="fas fa-check-circle"></i> Salvar Perfil de Coordenador
                    </button>
                </form>
            </div>

            <div class="tab-pane fade" id="colaborador" role="tabpanel" aria-labelledby="colaborador-tab">
                <h3 class="mb-3">Atribuir Colaborador</h3>
                <form method="post">
                    {% csrf_token %}
                    
                    {{ colaborador_form|crispy }}
                    
                    <button type="submit" name="salvar_colaborador" class="btn btn-success mt-3">
                        <i class="fas fa-check-circle"></i> Salvar Perfil de Colaborador
                    </button>
                </form>
            </div>
        </div>
        
        <p class="mt-4">
            <a href="{% url 'home' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Voltar para o Início
            </a>
        </p>

    </div>
</div>

{% endblock content %}